<template>
  <div class="sidebar">
    <el-menu class="el-menu-vertical-demo">
      <el-popover v-for="menu,index in menuItems"
        :key="index"
        :visible-arrow="false"
        :ref="menu.ref"
        trigger="hover"
        placement="right"
        popper-class="sidebar-popover">
        <el-row :gutter="20">
          <el-col v-for="child, index in menu.children"
            :key="index"
            :span="12">
            <h3>{{child.label}}</h3>
            <el-button type="text" v-for="child,index in child.children" :key="index" @click="onClick(menu.ref, child)">{{child.label}}</el-button>
          </el-col>
        </el-row>
        <div slot="reference">
          <el-menu-item :index="menu.value">{{menu.label}}</el-menu-item>
        </div>
      </el-popover>
    </el-menu>
  </div>
</template>

<script>
export default {
  name: 'v-side-bar',
  data () {
    return {
      menuItems: this.$menus
    }
  },
  methods: {
    onClick (ref, tab) {
      this.$refs[ref][0].doClose()
      this.$emit('change', tab)
      this.$router.push(tab.route)
    }
  }
}
</script>
